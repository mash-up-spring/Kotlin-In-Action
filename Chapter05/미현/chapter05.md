## 5. 람다 ##

### 5.1. 람다 식과 멤버 참조 ###
람다 식을 사용하면 무명 내부 클래스를 사용하는 대신 함수를 다른 함수로 직접 전달 할 수 있다.   

람다는 값처럼 전달할 수 있는 동작의 모음을 일컫는다. 

#### 코틀린 람다 문법 ####
- 람다식은 항상 중괄호 안에 위치한다.
- `->` 를 기준으로 인자 목록과 람다 본문을 구분한다.
- `run` 라이브러리 함수를 통해 람다를 직접 실행할 수 있다.
  ```kotlin   
    run { println("hi") }
    ```
- 함수 호출 시 가장 마지막 인자가 람다 식인 경우, 관습적으로 람다를 괄호 밖으로 꺼내 쓴다.
  ```kotlin   
    people.maxBy() { p: Person -> p.age }
    ```
- 람다 식이 함수의 유일한 인자이면서 괄호 뒤에 람다 식을 쓴 경우, 호출 시 빈 괄호 생략이 가능하다.
    ```kotlin   
    people.maxBy { p: Person -> p.age }
    ```
- 컴파일러가 추론 가능한 파라미터 타입은 생략가능하다.   
  처음에는 파라미터를 생략하고, 컴파일러가 추론하지 못하는 경우에 파라미터를 명시한다.
    ```kotlin   
    people.maxBy { p -> p.age }
    ```
- 디폴트 파라미터 이름인 `it`으로 명명할 수 있다.   
  - `it`을 바로 쓸 수 있는 경우   
    람다의 파라미터가 1개이고, 타입을 컴파일러가 추론 가능할 경우 
  - `it`사용을 지양하는 경우   
    람다가 중첩되는 경우 it을 사용하면 혼란스러울 수 있어 파라미터를 명시하는 것이 낫다.
- 람다를 변수에 저장할 때는 파라미터의 타입을 추론할 문맥이 없어 파라미터 타입을 명시해야한다.
- 여러 줄로 이루어진 람다는 가장 마지막 식이 결과값이다.

#### 변수 포획 ####
함수 안에 정의된 람다는 함수의 파라미터, 람다 정의 앞에 선언된 로컬 변수를 사용할 수 있다.
람다 밖 함수에 있는 `final`이 아닌 변수에 접근가능하고, 변경가능하다는 점은 자바와 차별되어 코틀린에서만 가능한 점이다. 
> 자바의 람다 식은 포획된 변수에 `final`을 명시하거나, 명시하지 않더라도 값을 변경 할 수 없는 불변 변수를 사용하도록 한다. 
> (위반시 컴파일 에러)

#### 멤버 참조 ####
```kotlin   
//멤버참조 (클래스::멤버)
people.maxBy(Person::age)  
```
- 이중 콜론(`::`)을 사용해서 멤버 참조를 할 수 있다.
- 멤버 참조로 프로퍼티, 메소드를 한개만 호출하는 함수 값을 만든다. 
- 확장 함수에도 멤버 참조 구문을 사용할 수 있다.

### 5.2. 컬렉션 함수형 API ###
- `filter` : 컬렉션에서 원치 않는 원소 제거
- `map` : 원소 변환해 새 컬렉션 생성
- `all` : 모든 원소가 술어 만족하는지 여부
- `any` : 술어를 만족하는 원소가 하나라도 있는지 여부
- `count` : 술어 만족하는 원소 개수
- `find` : 술어 만족하는 원소 하나 찾기(가장 첫번재 원소 반환). 만족하는 원소 없는 경우 null반환
- `groupBy` : 원소 특성에 따라 그룹으로 분류. 구분 특성이 Key, 컬렉션 내 객체 리스트가 Value인 맵 반환
- `flatMap` : 인자로 주어진 람다를 컬렉션 내 모든 객체에 적용 후 결과를 한 리스트로 모아 반환